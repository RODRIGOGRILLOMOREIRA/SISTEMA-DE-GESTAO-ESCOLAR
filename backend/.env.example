# ==========================================
# CONFIGURA√á√ÉO DE AMBIENTE - SISTEMA DE GEST√ÉO ESCOLAR
# ==========================================
# 
# ‚ö†Ô∏è  IMPORTANTE: Copie este arquivo para .env e preencha com valores reais
# cp .env.example .env
#
# üö´ NUNCA commite o arquivo .env com valores reais!
# ==========================================

# ==========================================
# DATABASE - PostgreSQL
# ==========================================
# Desenvolvimento (Docker Local) - Porta 5433 para evitar conflito
DATABASE_URL=postgresql://sge_user:sge_password@localhost:5433/sge_db

# Configura√ß√µes PostgreSQL diretas (para pool pg)
POSTGRES_USER=sge_user
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=sge_db

# ==========================================
# REDIS - Cache e Filas
# ==========================================
# Redis Local (Docker) - Desenvolvimento
# ‚ö†Ô∏è  A senha cont√©m @ que deve ser codificada como %40 na URL
REDIS_URL=redis://:CHANGE_ME_IN_PRODUCTION@localhost:6379/0

# Redis Cloud (Upstash) - Produ√ß√£o/Backup
# üìù Obtenha sua URL em: https://console.upstash.com/
UPSTASH_REDIS_URL=rediss://default:YOUR_PASSWORD@your-instance.upstash.io:6379

# Configura√ß√µes do Sistema H√≠brido Redis
REDIS_WRITE_BOTH=true           # true = escreve em ambos (local + cloud)
REDIS_READ_PREFERENCE=local     # local ou cloud (padr√£o: local = mais r√°pido)
REDIS_SYNC_ENABLED=false        # true = sincroniza cloud ‚Üí local periodicamente

# ==========================================
# SERVER
# ==========================================
PORT=3333
NODE_ENV=development  # development | production | test

# ==========================================
# FRONTEND
# ==========================================
FRONTEND_URL=http://localhost:5173

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================
# ‚ö†Ô∏è  OBRIGAT√ìRIO: Gere uma chave forte com:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERATE_A_STRONG_SECRET_HERE_MINIMUM_64_CHARACTERS

# ‚ö†Ô∏è  OBRIGAT√ìRIO: Chave de criptografia AES-256-GCM (64 caracteres hex)
# Gere com: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=GENERATE_A_STRONG_ENCRYPTION_KEY_HERE_64_CHARS

# ===================
# OPENAI (Intelig√™ncia Artificial)
# ===================
# Obtenha em: https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# ==========================================
# BACKUP AUTOM√ÅTICO
# ==========================================
BACKUP_ENABLED=true
# Agendamento (formato cron): 0 3 * * * = 3h da manh√£ todos os dias
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=./backups
BACKUP_ON_START=false

# ==========================================
# SISTEMA DE NOTIFICA√á√ïES
# ==========================================
# Ativar sistema de notifica√ß√µes
NOTIFICACOES_ATIVAS=false
# Modo de teste (n√£o envia notifica√ß√µes reais)
MODO_TESTE=true

# WhatsApp Business API (Meta)
# üìù Obtenha em: https://developers.facebook.com/apps/
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_ACCESS_TOKEN=your_access_token
WHATSAPP_VERIFY_TOKEN=your_verify_token_123

# Telegram Bot
# üìù Crie seu bot em: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/notificacoes/webhook/telegram

# SMS (Twilio)
# üìù Obtenha em: https://www.twilio.com/console
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+5511999999999

# ==========================================
# IA E INTEGRA√á√ïES
# ==========================================
# OpenAI (IA Conversacional e Predi√ß√£o de Evas√£o)
# üìù Obtenha em: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4

# ==========================================
# UPLOADS E ARQUIVOS
# ==========================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880  # 5MB em bytes

# ==========================================
# OBSERVABILIDADE
# ==========================================
# N√≠veis: error, warn, info, debug, trace
LOG_LEVEL=info
LOG_TO_FILE=true

# ==========================================
# DESENVOLVIMENTO
# ==========================================
# Desabilitar cache (√∫til para testes)
DISABLE_CACHE=false
# Mostrar queries SQL
DEBUG_SQL=false

# ==========================================
# PRODU√á√ÉO
# ==========================================
# URLs permitidas no CORS (separadas por v√≠rgula)
# CORS_ORIGINS=https://suaescola.com.br,https://app.suaescola.com.br
# For√ßar HTTPS
# FORCE_HTTPS=true
# Dom√≠nio para cookies
# COOKIE_DOMAIN=.suaescola.com.br

# ==========================================
# üìù NOTAS IMPORTANTES
# ==========================================
# 
# 1. DESENVOLVIMENTO:
#    - Use senhas simples
#    - MODO_TESTE=true
#    - NODE_ENV=development
#
# 2. PRODU√á√ÉO:
#    - Gere senhas fortes (64+ caracteres)
#    - MODO_TESTE=false
#    - NODE_ENV=production
#    - Configure backups autom√°ticos
#    - Use HTTPS obrigat√≥rio
#
# 3. SEGURAN√áA:
#    - NUNCA commite o arquivo .env
#    - Use vari√°veis de ambiente em servidores
#    - Rotacione chaves periodicamente
#    - Mantenha backups das configura√ß√µes
# ==========================================
# 
# ‚ö†Ô∏è IMPORTANTE:
# - Fa√ßa BACKUP desta chave em local seguro (ver SECURITY_KEYS_BACKUP.txt)
# - Guarde em gerenciador de senhas (1Password, LastPass, Bitwarden)
# - Se perder esta chave, dados criptografados N√ÉO PODER√ÉO ser recuperados!
# - Nunca compartilhe esta chave
ENCRYPTION_KEY=your_encryption_key_here_64_hex_chars_replace_with_real_key

# N√≠vel de logs (debug, info, warn, error, fatal)
LOG_LEVEL=info
